{"mappings":"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","sources":["js/script.js"],"sourcesContent":["\"use strict\";\n\nconst account1 = {\n  owner: \"حسام الدین چراغی\",\n  movements: [\n    200000, 455000, -306500, 250000, -642000, -133900, 791000, 130000,\n  ],\n  interestRate: 1.2, // %\n  username: \"js\",\n  pin: 1111,\n\n  movementsDates: [\n    \"2021-11-18T21:31:17.178Z\",\n    \"2021-12-23T07:42:02.383Z\",\n    \"2022-01-28T09:15:04.904Z\",\n    \"2022-04-01T10:17:24.185Z\",\n    \"2022-05-08T14:11:59.604Z\",\n    \"2022-05-27T17:01:17.194Z\",\n    \"2022-07-11T23:36:17.929Z\",\n    \"2022-07-12T10:51:36.790Z\",\n  ],\n  currency: \"IRR\",\n  locale: \"fa-IR\",\n};\n\nconst account2 = {\n  owner: \"محمد محمدی\",\n  movements: [50000, 340000, -150000, -790000, -321000, 1000000, 85000, -30000],\n  interestRate: 1.5,\n  username: \"go\",\n  pin: 2222,\n\n  movementsDates: [\n    \"2021-11-01T13:15:33.035Z\",\n    \"2021-11-30T09:48:16.867Z\",\n    \"2021-12-25T06:04:23.907Z\",\n    \"2022-01-25T14:18:46.235Z\",\n    \"2022-02-05T16:33:06.386Z\",\n    \"2022-04-10T14:43:26.374Z\",\n    \"2022-06-25T18:49:59.371Z\",\n    \"2022-07-26T12:01:20.894Z\",\n  ],\n  currency: \"IRR\",\n  locale: \"fa-IR\",\n};\n\nconst accounts = [account1, account2];\n\nconst body = document.querySelector(\"body\");\nconst labelWelcome = document.querySelector(\".welcome\");\nconst labelDate = document.querySelector(\".date\");\nconst labelBalance = document.querySelector(\".balance__value\");\nconst labelSumIn = document.querySelector(\".summary__value--in\");\nconst labelSumOut = document.querySelector(\".summary__value--out\");\nconst labelSumInterest = document.querySelector(\".summary__value--interest\");\nconst labelTimer = document.querySelector(\".timer\");\n\nconst containerApp = document.querySelector(\".app\");\nconst containerMovements = document.querySelector(\".movements\");\n\nconst btnLogin = document.querySelector(\".login__btn\");\nconst btnTransfer = document.querySelector(\".form__btn--transfer\");\nconst btnLoan = document.querySelector(\".form__btn--loan\");\nconst btnClose = document.querySelector(\".form__btn--close\");\nconst btnSort = document.querySelector(\".btn--sort\");\n\nconst inputLoginUsername = document.querySelector(\".login__input--user\");\nconst inputLoginPin = document.querySelector(\".login__input--pin\");\nconst inputTransferTo = document.querySelector(\".form__input--to\");\nconst inputTransferAmount = document.querySelector(\".form__input--amount\");\nconst inputLoanAmount = document.querySelector(\".form__input--loan-amount\");\nconst inputCloseUsername = document.querySelector(\".form__input--user\");\nconst inputClosePin = document.querySelector(\".form__input--pin\");\nconst logOutButton = document.querySelector(\".logout__btn\");\nconst formatMovmentDate = function (date, locale = \"fa-IR\") {\n  const calcDaysPassed = (date1, date2) =>\n    Math.round(Math.abs(date1 - date2) / (1000 * 60 * 60 * 24));\n\n  const daysPassed = calcDaysPassed(new Date(), date);\n\n  if (daysPassed === 0) return \"امروز\";\n  if (daysPassed === 0) return \"دیروز\";\n  if (daysPassed <= 7) return `${daysPassed} روز پیش`;\n\n  return new Intl.DateTimeFormat(locale).format(date);\n};\n\nconst formatCurrency = function (value, locale, currency) {\n  return `${new Intl.NumberFormat(locale).format(value)} ریال`;\n};\n\nconst displayMovements = function (account, sort = false) {\n  containerMovements.innerHTML = \"\";\n\n  const movsToDisplay = sort\n    ? account.movements.slice().sort((a, b) => a - b)\n    : account.movements;\n\n  movsToDisplay.forEach(function (mov, i) {\n    const movementType = mov > 0 ? \"deposit\" : \"withdrawal\";\n\n    const date = new Date(account.movementsDates[i]);\n    const displayDate = formatMovmentDate(date, account.locale);\n\n    const formattedMovment = formatCurrency(\n      mov,\n      account.locale,\n      account.currency\n    );\n\n    const html = `\n    <div class=\"movements__row\">\n      <div class=\"movements__value\">${formattedMovment}</div>\n      <div class=\"movements__type movements__type--${movementType}\">\n      ${mov > 0 ? \"واریز به حساب\" : \"برداشت از حساب\"}\n      </div>\n      <div class=\"movements__date\">${displayDate}</div>\n    </div>`;\n    containerMovements.insertAdjacentHTML(\"afterbegin\", html);\n  });\n};\n\nconst calcDisplaySummary = function (account) {\n  const incomes = account.movements\n    .filter((mov) => mov > 0)\n    .reduce((acc, mov) => acc + mov, 0);\n\n  labelSumIn.textContent = formatCurrency(\n    incomes,\n    account.locale,\n    account.currency\n  );\n\n  const out = account.movements\n    .filter((mov) => mov < 0)\n    .reduce((acc, mov) => acc + mov, 0);\n  labelSumOut.textContent = formatCurrency(\n    Math.abs(out),\n    account.locale,\n    account.currency\n  );\n};\n\nconst calcDisplayBalance = function (account) {\n  account.balance = account.movements.reduce(\n    (accumulator, movement) => accumulator + movement,\n    0\n  );\n  labelBalance.textContent = formatCurrency(\n    account.balance,\n    account.locale,\n    account.currency\n  );\n};\n\nconst updateUI = function (currentAccount) {\n  calcDisplayBalance(currentAccount);\n\n  displayMovements(currentAccount);\n\n  calcDisplaySummary(currentAccount);\n};\n\nconst startLogOutTimer = function () {\n  const tick = function () {\n    const min = String(Math.trunc(time / 60));\n    const sec = String(Math.trunc(time % 60));\n    labelTimer.textContent = ` ${min} دقیقه و ${sec} ثانیه `;\n    if (time === 0) {\n      clearInterval(timer);\n      console.log(\"logged out user => \", currentAccount.owner);\n\n      labelWelcome.textContent = \"برای دیدن اطلاعات حساب ابتدا وارد شوید\";\n      body.classList.remove(\"logged-in\");\n      currentAccount = undefined;\n    }\n    time--;\n  };\n  let time = 300;\n  tick();\n  const timer = setInterval(tick, 1000);\n  return timer;\n};\n\nlet currentAccount, timer;\n\nbtnLogin.addEventListener(\"click\", function (e) {\n  e.preventDefault();\n  currentAccount = accounts.find(\n    (acc) => acc.username === inputLoginUsername.value\n  );\n\n  if (currentAccount?.pin === +inputLoginPin.value) {\n    console.log(\"logged in user => \", currentAccount.owner);\n\n    labelWelcome.textContent = `سلام ${\n      currentAccount.owner.split(\" \")[0]\n    } خوش آمدی`;\n    body.classList.add(\"logged-in\");\n\n    const now = new Date();\n    const options = {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      day: \"numeric\",\n      month: \"numeric\",\n      year: \"numeric\",\n    };\n    labelDate.textContent = new Intl.DateTimeFormat(\n      currentAccount.locale,\n      options\n    ).format(now);\n\n    inputLoginUsername.value = inputLoginPin.value = \"\";\n\n    inputLoginUsername.blur();\n    inputLoginPin.blur();\n\n    if (timer) clearInterval(timer);\n\n    timer = startLogOutTimer();\n\n    updateUI(currentAccount);\n  }\n});\n\nbtnTransfer.addEventListener(\"click\", function (e) {\n  e.preventDefault();\n  const amount = +inputTransferAmount.value;\n  const receiverAccount = accounts.find(\n    (account) => account.username === inputTransferTo.value\n  );\n  console.log(\"requesting transfer\", amount, \"to\", receiverAccount.owner);\n\n  if (\n    amount > 0 &&\n    receiverAccount &&\n    currentAccount?.balance >= amount &&\n    receiverAccount?.username !== currentAccount.username\n  ) {\n    console.log(\"Transfer is valid!\");\n\n    currentAccount.movements.push(-amount);\n    receiverAccount.movements.push(amount);\n    currentAccount.movementsDates.push(new Date().toISOString());\n    receiverAccount.movementsDates.push(new Date().toISOString());\n\n    inputTransferAmount.value = inputTransferTo.value = \"\";\n    inputTransferAmount.blur();\n    inputTransferTo.blur();\n    updateUI(currentAccount);\n\n    clearInterval(timer);\n    timer = startLogOutTimer();\n  }\n});\n\nbtnLoan.addEventListener(\"click\", function (e) {\n  e.preventDefault();\n  const amount = Math.floor(inputLoanAmount.value);\n\n  if (\n    amount > 0 &&\n    currentAccount.movements.some((movement) => movement >= amount * (10 / 100))\n  ) {\n    console.log(\"loan request accepted\");\n    currentAccount.movements.push(amount);\n    currentAccount.movementsDates.push(new Date().toISOString());\n    inputLoanAmount.value = \"\";\n    inputLoanAmount.blur();\n    setTimeout(function () {\n      updateUI(currentAccount);\n    }, 1500);\n  }\n\n  clearInterval(timer);\n  timer = startLogOutTimer();\n});\n\nbtnClose.addEventListener(\"click\", function (e) {\n  e.preventDefault();\n  if (\n    currentAccount.username === inputCloseUsername.value &&\n    currentAccount.pin === +inputClosePin.value\n  ) {\n    console.log(\"deleted\", currentAccount.owner);\n    const index = accounts.findIndex(\n      (account) => account.username === currentAccount.username\n    );\n    accounts.splice(index, 1);\n\n    body.classList.remove(\"logged-in\");\n    inputCloseUsername.value = inputClosePin.value = \"\";\n    inputCloseUsername.blur();\n    inputClosePin.blur();\n    labelWelcome.textContent = \"برای دیدن اطلاعات حساب ابتدا وارد شوید\";\n  }\n});\n\nlet sorted = false;\nbtnSort.addEventListener(\"click\", () => {\n  sorted = !sorted;\n  displayMovements(currentAccount, sorted);\n});\n\nlogOutButton.addEventListener(\"click\", () => {\n  body.classList.remove(\"logged-in\");\n  inputCloseUsername.value = inputClosePin.value = \"\";\n  inputCloseUsername.blur();\n  inputClosePin.blur();\n  labelWelcome.textContent = \"برای دیدن اطلاعات حساب ابتدا وارد شوید\";\n});\n"],"names":["currentAccount","timer","account1","owner","movements","interestRate","username","pin","movementsDates","currency","locale","account2","accounts","body","document","querySelector","labelWelcome","labelDate","labelBalance","labelSumIn","labelSumOut","labelSumInterest","labelTimer","containerApp","containerMovements","btnLogin","btnTransfer","btnLoan","btnClose","btnSort","inputLoginUsername","inputLoginPin","inputTransferTo","inputTransferAmount","inputLoanAmount","inputCloseUsername","inputClosePin","logOutButton","formatMovmentDate","date","arguments","length","calcDaysPassed","date1","date2","Math","round","abs","daysPassed","Date","concat","Intl","DateTimeFormat","format","formatCurrency","value","NumberFormat","displayMovements","account","sort","innerHTML","movsToDisplay","slice","a","b","forEach","mov","i","movementType","displayDate","formattedMovment","html","insertAdjacentHTML","calcDisplaySummary","incomes","filter","reduce","acc","textContent","out","calcDisplayBalance","balance","accumulator","movement","updateUI","currentAccount1","startLogOutTimer","tick","min","String","trunc","time","sec","clearInterval","timer1","console","log","classList","remove","undefined","setInterval","addEventListener","e","preventDefault","find","split","add","now","hour","minute","day","month","year","blur","amount","receiverAccount","push","toISOString","floor","some","setTimeout","index","findIndex","splice","sorted"],"version":3,"file":"index.9f38120a.js.map"}